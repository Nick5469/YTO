<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTO 题库查询系统</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- 全局提示条 -->
    <div class="alert-bar" id="alertBar"></div>

    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <h1>🚀 YTO 题库查询</h1>
                <div class="header-meta">
                    <span class="version">v1.8.0</span>
                    <span class="parse-status" id="parseStatus">题库未解析</span>
                    <span class="current-time" id="currentTime"></span>
                </div>
            </div>
            <div class="header-controls">
                <button class="import-button" id="importButton" title="导入题库" style="display: none;">
                    <i class="fas fa-file-import"></i>
                </button>
                <div class="toggle-container">
                    <span class="toggle-label">本地</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="modeToggle" title="点击切换模式">
                        <span class="slider"></span>
                    </label>
                    <span class="toggle-label">在线</span>
                </div>
                <button class="refresh-button" id="refreshButton" title="重新获取题库">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="delete-button" id="deleteButton" title="清除所有记录">
                    <i class="fas fa-trash-alt"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="content">

        <!-- 公告栏 -->
        <div class="notice-tab active" id="noticeTab">
            <div class="notice-content">
                <h3>使用指南</h3>
                <ol>
                    <li>在系统配置页面完成配置</li>
                    <li>切换到适合的模式（本地模式请自行上传题库，在线模式请等待获取题库），然后等待题库解析完毕</li>
                    <li>选择查询方式：ID查询、题目查询或选项查询</li>
                    <li>在输入框中输入查询内容</li>
                    <li>点击查询按钮获取结果</li>
                </ol>
                <h4>特别提示: 考试界面只能进入一次，退出后无法再次进入。注意掌握考试时间！考试结束会强制收卷。</h4>
            </div>
            <button class="close-notice" id="closeNotice">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="search-container">
            <div class="search-tabs">
                <button class="tab-button active" data-tab="id-tab">ID查询</button>
                <button class="tab-button" data-tab="question-tab">题目查询</button>
                <button class="tab-button" data-tab="option-tab">选项查询</button>
                <button class="tab-button" data-tab="settings-tab">系统配置</button>
            </div>

            <!-- 修改后的ID查询表单 -->
            <div class="tab-content active" id="id-tab">
                <form class="search-form">
                    <input type="text" placeholder="输入题目ID" id="idInput">
                    <div class="query-buttons">
                        <button type="button" class="local-query">本地查询</button>
                        <button type="button" class="online-query">在线查询</button>
                    </div>
                </form>
            </div>

            <!-- 修改后的题目查询和选项查询表单 -->
            <!-- 修改题目查询表单 -->
            <div class="tab-content" id="question-tab">
                <form class="search-form" id="questionForm">
                    <input type="text" placeholder="输入题目关键词" id="questionInput">
                    <button type="submit">查询</button>
                </form>
            </div>

            <div class="tab-content" id="option-tab">
                <form class="search-form" id="optionForm">
                    <input type="text" placeholder="输入选项内容" id="optionInput">
                    <button type="submit">查询</button>
                </form>
            </div>

            <div class="tab-content" id="settings-tab">
                <div class="settings-container">
                    <div class="setting-item">
                        <h4>账号授权</h4>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="authType" value="cloud" checked>
                                <span>云端授权</span>
                            </label>
                            <label>
                                <input type="radio" name="authType" value="local">
                                <span>本地授权</span>
                            </label>
                        </div>
                    </div>

                    <div class="setting-item">
                        <h4>题库源</h4>
                        <div class="radio-group">
                            <label>
                                <input type="radio" name="questionSource" value="global" checked>
                                <span>全球源</span>
                            </label>
                            <label>
                                <input type="radio" name="questionSource" value="local">
                                <span>国内源</span>
                            </label>
                        </div>
                    </div>

                    <button class="save-settings" id="saveSettings">保存设置</button>
                    <button class="get-auth" id="getAuthButton">获取账号授权</button>
                </div>
            </div>

        </div>

        <!-- 统一结果展示 -->
        <div class="tab-content result-content" id="result-tab">
            <h3 class="result-title">查询结果</h3>
            <!-- 新增多结果选择区域 -->
            <div class="multi-results" id="multiResults" style="display: none;">
                <h4>找到多个匹配结果：</h4>
                <ul class="result-list" id="resultList"></ul>
            </div>
            <div class="result-grid">
                <div class="result-item">
                    <label>类型:</label>
                    <span class="highlight" id="result-type">-</span>
                </div>
                <div class="result-item">
                    <label>难度:</label>
                    <span class="highlight" id="result-difficulty">-</span>
                </div>
                <div class="result-item">
                    <label>ID:</label>
                    <span class="highlight" id="result-id">-</span>
                </div>
                <div class="result-item full-width">
                    <label>题目:</label>
                    <div class="result-value highlight" id="result-question">-</div>
                </div>
                <div class="result-item">
                    <label>答案:</label>
                    <span class="highlight answer" id="result-answer">-</span>
                </div>
                <div class="result-item full-width">
                    <label>选项:</label>
                    <div class="result-value highlight" id="result-options">-</div>
                </div>
            </div>

        </div>

        <!-- 在查询记录部分添加清除按钮 -->
        <div class="query-history">
            <h3>查询记录</h3>
            <ul id="historyList"></ul>
        </div>

    </main>

    <script src="js/script.js"></script>
</body>

</html>